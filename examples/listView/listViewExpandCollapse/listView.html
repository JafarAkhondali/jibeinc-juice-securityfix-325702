<!DOCTYPE html>
<html>

<head>
  <title>List View Example</title>
  <link rel='stylesheet' type='text/css' href='https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css'>
  <script src="https://cdn.polyfill.io/v2/polyfill.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/dot/1.0.3/doT.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.4/jquery.js"></script>
  <script>
    window.exports = {};
  </script>
  <script src='../../../dist/ui.js'></script>
</head>

<body>

  <div class='search-results'></div>

  <script>
    var results = new exports.UI.ListView('.search-results', {
      fetch: function(cb) {
        var results = [];

        // TODO: go do some stuff to get new results...

        cb(results);
      },

      listItemOpts: {
        attrs: {
          foo: 'bar',
          baz: 'foobar',
          class: 'testClass'
        },
        expandCollapse: {
          containerSelector: '.expand-collapse-test-container',
          toggledClass: 'i-am-toggled',
          toggleSelector: '.toggle',
          untoggledClass: 'i-am-NOT-toggled'
        },
        template: doT.template(
          '<div class="index-{{=it.index}}">' +
          '<h3>{{=it.value}}</h3>' +
          '<span class="toggle">Show details</span>' +
          '<div class="expand-collapse-test-container">' +
          '<p>' +
          'Lorem ipsum dolor sit amet, consectetur adipiscing elit. Donec ut porttitor eros. In nec nulla quam. Nullam at vulputate' +
          'ipsum. Curabitur elementum lectus sit amet orci placerat ultrices. Phasellus ipsum tellus, facilisis rhoncus maximus' +
          'sit amet, sollicitudin quis felis. Morbi a ipsum congue neque hendrerit mollis a ac turpis. Pellentesque habitant morbi' +
          'tristique senectus et netus et malesuada fames ac turpis egestas. Sed auctor metus sed nulla aliquet, in sagittis tellus' +
          'sodales. Etiam nec neque eu enim consectetur vehicula.' +
          '</p>' +
          '<p>' +
          'Nulla volutpat ante ut odio posuere dapibus. Nunc justo lacus, accumsan a lobortis eget, commodo sit amet ante. Donec mattis' +
          'mauris eget eros luctus iaculis. Aenean vel aliquam nisi. Morbi fringilla imperdiet ultrices. Cras eget sem eleifend,' +
          'blandit enim tempor, convallis augue. Phasellus id sagittis purus, a accumsan velit.' +
          '</p>' +
          '</div>' +
          '</div>')
      },

      results: ['John Smith']//, 'Bob Barker', 'George Lucas', 'Dave Hester', 'Jerry Seinfeld'] // initial results to show
    });

    results.subscribe(function(selection) {
      console.log('list item selected', selection);
    });

    results.render();
  </script>

</body>

</html>
